{% extends 'head.html' %}
{% block title %}
Registration
{% endblock title %}
<!-- Bootstrap v5.1.3 CDNs -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>

<!-- Google font family -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap" rel="stylesheet">

<!-- Font Awesome kit -->
<script src="https://kit.fontawesome.com/f8cd4d7fce.js" crossorigin="anonymous"></script>


{% block content %}

<style>
    .required:after {
      content:" *";
      color: red;
    }
    </style>

<nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a class="text-black text-decoration-none" >Home</a></li>
        <li class="breadcrumb-item active" aria-current="page">Registration</li>
    </ol>
</nav>

<section class="registration-section">

    <div class="registration">
        <h1 class="text-center fw-bold mb-3">Registration</h1>
        <form action="" class="row g-3 needs-validation" novalidate method="post">
            {% csrf_token %}
            <div class="col-md-6">
                <label for="validationCustom01" class="form-label required">First name</label>
                <input type="text" class="form-control" type="text" id="validationCustom01" required="" name="fname"/>
                <div class="valid-feedback">
                    Looks good!
                </div>
            </div>
            <div class="col-md-6">
                <label for="validationCustom02" class="form-label required">Last name</label>
                <input type="text" class="form-control" type="text" id="validationCustom02" required name="lname">
                <div class="valid-feedback">
                    Looks good!
                </div>
            </div>

            <div class="col-md-12">
                <label for="validationCustom01" class="form-label ">Phone </label>
                <input type="text" class="form-control" type="number" placeholder="888 888 8888" maxlength="10" id="validationCustom01" required name="phone">
                <div class="valid-feedback">
                    Looks good!
                </div>
            </div>
            <div class="col-md-12">
                <label for="validationCustomUsername" class="form-label required">Email</label>
                <div class="input-group has-validation">
                    <span class="input-group-text" id="inputGroupPrepend">@</span>
                    <input type="text" class="form-control " type="email" id="validationCustomUsername" name="email" aria-describedby="inputGroupPrepend" required>
                    <div class="invalid-feedback">
                        Please enter Email ID.
                    </div>
                </div>
            </div>


            <div class="col-md-12">
                <label class="form-label required">Select the batch you are interested in </label>
                <select class="form-select" id="optionMenuInterest" onchange = "populate(this.id,'MenuDreamsProgram')" name="dreams">
                    <option>Select Interest</option>
                    <option value="dreamsProgram">DREAMS Program</option>
                    <option value="dreamsBand">DREAMS Band</option>
                    <option value="dreamProClub">DREAMS Pro Club</option>
                    <option value="conference">Conference</option>
                </select>
                <div class="invalid-feedback">
                    Please select a valid state.
                </div>
            </div>

            <div class="col-md-12" id="optionMenuDreamsProgram">
                <label class="form-label required">DREAMS Program</label>
                <select class="form-select" id="MenuDreamsProgram" name="dreamsOption">
                    <option>Select Interest</option>
                    <!-- <option value="participant">Participant </option>
                    <option value="volunteer">Volunteer </option>
                    <option value="partner">Partner</option> -->
                </select>
                <div class="invalid-feedback">
                    Please select a valid state.
                </div>
            </div>

            <div class="col-12" >
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" value="" id="invalidCheck" required>
                    <label class="form-check-label" for="invalidCheck">
                        Agree to terms and conditions
                    </label>
                    <div class="invalid-feedback">
                        You must agree before submitting.
                    </div>
                </div>
            </div>
            <div class="col-12">
                <button class="btn btn-primary" type="submit">Submit form</button>
            </div>
        </form>
        
    </div>

    

    
</section>

<h1 class="h2">Summary</h1>

<div class="row">
    <div class="col-12 col-xl-12 mb-4 mb-lg-0">
        <div class="card">
            <h5 class="card-header">Latest registration</h5>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table">
                        <thead>
                            <tr>
                                <th scope="col">First Name</th>
                                <th scope="col">Last Name</th>
                                <th scope="col">Phone Number</th>
                                <th scope="col">Email</th>
                                <th scope="col">DREAMS Events</th>
                                <th scope="col">Prefences</th>            
                            </tr>
                        </thead>
                        {% for item in query_results %}
                        <tbody>
                            <tr>
                                <th scope="row">{{ item.fname }}</th>
                                <td>{{ item.lname }}</td>
                                <td>{{ item.phone }}</td>
                                <td>{{ item.email }}</td>
                                <td>{{ item.dreams }}</td>
                                <td>{{ item.dreamsOption }}</td>
                                
                            </tr>
                            
                        </tbody>
                        {% endfor %}
                    </table>
                </div>
                <a href="#" class="btn btn-block btn-light">View all</a>
            </div>
        </div>
    </div>


</div>




<script type="text/javascript">
    // Example starter JavaScript for disabling form submissions if there are invalid fields
    (function () {
        'use strict'

        // Fetch all the forms we want to apply custom Bootstrap validation styles to
        var forms = document.querySelectorAll('.needs-validation')

        // Loop over them and prevent submission
        Array.prototype.slice.call(forms)
            .forEach(function (form) {
                form.addEventListener('submit', function (event) {
                    if (!form.checkValidity()) {
                        event.preventDefault()
                        event.stopPropagation()
                    }

                    form.classList.add('was-validated')
                }, false)
            })
    })()



    function populate(s1,s2) 
    {
        var s1 = document.getElementById(s1);
        var s2 = document.getElementById(s2);

        console.log(s1,s2);

        s2.innerHTML = "";

        if(s1.value == "dreamsProgram")
        {
            var optionArray=['participant|Participant','volunteer|Volunteer','partner|Partner'];   
        }
        else if(s1.value == "dreamsBand")
        {
            var optionArray=['volunteer|Volunteer','partner|Partner']; 
        }
        else if(s1.value == "dreamProClub")
        {
            var optionArray=['volunteer|Volunteer','partner|Partner']; 
        }
        else
        {
            var optionArray=['none|None'];
        }

        for (var option in optionArray)
        {
            var pair=optionArray[option].split("|");
            var newoption=document.createElement("option");

            newoption.value = pair[0];
            newoption.innerHTML=pair[1];
            s2.options.add(newoption);
        }
      
    }
</script>

{% endblock content %}