{% extends 'base.html' %}
{% load static %}

{% block title %}
{{ conference_data.page.subheading }}
{% endblock title %}

{% block extraStyles %}
{% endblock extraStyles %}

{% block content %}
    <!-- Page Header -->
    <section class="">
        <div class="container">
            <div class="page-header-content text-center mb-5">
                <img src="{% static conference_data.page.logo %}" 
                     height="120" 
                     alt="{{ conference_data.page.main_heading }}" 
                     class="mb-4 fade-in">
                
                <h1 class="display-4 fw-bold mb-3 fade-in">
                    {{ conference_data.page.main_heading }}
                </h1>
                
                <h2 class=" fade-in">
                    {{ conference_data.page.subheading }}
                </h2>
                
                <p class="text-medium fade-in mb-4">
                    {{ conference_data.page.tagline }}
                </p>
                
                <p class="text-light fade-in mb-4">
                    {{ conference_data.page.details }}
                </p>
                
                <a href="{{ conference_data.page.registration_link }}" 
                   target="_blank" 
                   class="btn btn-primary btn-lg ">
                    <i class="fas fa-user-plus me-2"></i>Register Here for Free
                </a>
            </div>
        </div>
    </section>
    
    <!-- Main Content -->
    <div class="content-section">
        <div class="container">
            <div class="row g-4">
                <!-- Theme Section -->
                <div class="col-lg-8">
                    <div class="content-card fade-in">
                        <div class="mb-3">
                            <span class="badge bg-gradient-primary text-white fs-6 px-3 py-2">
                                {{ conference_data.theme.section_title }}
                            </span>
                        </div>
                        <h2 class="text-primary-blue font-primary mb-4">
                            {{ conference_data.theme.heading|linebreaksbr }}
                        </h2>
                        {% for para in conference_data.theme.paragraphs %}
                            <p class="text-medium mb-4 lh-lg justify">{{ para }}</p>
                        {% endfor %}
                    </div>
                </div>

                <!-- Sidebar -->
                <div class="col-lg-4">
                    <!-- More Details -->
                    <div class="content-card fade-in mb-4">
                        <h3 class="text-primary-blue font-primary mb-4">
                            <i class="fas fa-info-circle me-2"></i>More Details
                        </h3>
                        <div class="d-grid gap-3">
                            {% for item in conference_data.more_details %}
                                <a href="{% static item.url %}" 
                                   class="btn btn-outline-primary text-start"
                                   target="_blank">
                                    <i class="fas fa-download me-2"></i>
                                    {{ item.label }}
                                </a>
                            {% endfor %}
                        </div>
                    </div>

                  
                </div>
            </div>
        </div>
    </div>

    <!-- Conference Schedule -->
    <div class="content-section bg-light-gray">
        <div class="container">
            <div class="text-center mb-5">
                <h2 class="section-title fade-in">
                    <i class="fas fa-calendar-alt me-3"></i>Conference Schedule
                </h2>
            </div>
            
            <div class="row g-4">
                <!-- Day One -->
                <div class="col-lg-4">
                    <div class="content-card fade-in h-100">
                        <div class="text-center mb-4">
                            <h3 class="text-primary-blue font-primary">
                                {{ conference_data.schedule.day_one.day_label }}
                            </h3>
                            <p class="text-medium">{{ conference_data.schedule.day_one.date }}</p>
                        </div>
                        {% for session in conference_data.schedule.day_one.sessions %}
                            <div class="schedule-item mb-3 p-3 bg-light-gray rounded-custom-small">
                                <div class="d-flex justify-content-between align-items-start mb-2">
                                    <span class="badge bg-gradient-secondary text-dark">{{ session.time }}</span>
                                </div>
                                {% if session.speaker %}
                                    <h6 class="text-primary-blue mb-2">{{ session.title }}</h6>
                                    <p class="text-medium mb-1 small">{{ session.speaker }}</p>
                                    <small class="text-light fst-italic">{{ session.affiliation }}</small>
                                {% else %}
                                    <h6 class="text-primary-blue">{{ session.title }}</h6>
                                {% endif %}
                            </div>
                        {% endfor %}
                    </div>
                </div>

                <!-- Day Two -->
                <div class="col-lg-4">
                    <div class="content-card fade-in h-100">
                        <div class="text-center mb-4">
                            <h3 class="text-primary-blue font-primary">
                                {{ conference_data.schedule.day_two.day_label }}
                            </h3>
                            <p class="text-medium">{{ conference_data.schedule.day_two.date }}</p>
                        </div>
                        {% for session in conference_data.schedule.day_two.sessions %}
                            <div class="schedule-item mb-3 p-3 bg-light-gray rounded-custom-small">
                                <div class="d-flex justify-content-between align-items-start mb-2">
                                    <span class="badge bg-gradient-secondary text-dark">{{ session.time }}</span>
                                </div>
                                {% if session.speaker %}
                                    <h6 class="text-primary-blue mb-2">{{ session.title }}</h6>
                                    <p class="text-medium mb-1 small">{{ session.speaker }}</p>
                                    <small class="text-light fst-italic">{{ session.affiliation }}</small>
                                {% else %}
                                    <h6 class="text-primary-blue">{{ session.title }}</h6>
                                {% endif %}
                            </div>
                        {% endfor %}
                    </div>
                </div>

                <!-- Day Three -->
                <div class="col-lg-4">
                    <div class="content-card fade-in h-100">
                        <div class="text-center mb-4">
                            <h3 class="text-primary-blue font-primary">
                                {{ conference_data.schedule.day_three.day_label }}
                            </h3>
                            <p class="text-medium">{{ conference_data.schedule.day_three.date }}</p>
                        </div>
                        {% for session in conference_data.schedule.day_three.sessions %}
                            <div class="schedule-item mb-3 p-3 bg-light-gray rounded-custom-small">
                                <div class="d-flex justify-content-between align-items-start mb-2">
                                    <span class="badge bg-gradient-secondary text-dark">{{ session.time }}</span>
                                </div>
                                {% if session.speaker %}
                                    <h6 class="text-primary-blue mb-2">{{ session.title }}</h6>
                                    <p class="text-medium mb-1 small">{{ session.speaker }}</p>
                                    <small class="text-light fst-italic">{{ session.affiliation }}</small>
                                {% else %}
                                    <h6 class="text-primary-blue">{{ session.title }}</h6>
                                {% endif %}
                            </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Keynote Speakers -->
    <div class="content-section">
        <div class="container">
            <div class="text-center mb-5">
                <h2 class="section-title fade-in">
                    <i class="fas fa-microphone me-3"></i>Keynote Speakers
                </h2>
            </div>
            
            <div class="row g-4">
                {% for speaker in conference_data.keynote_speakers %}
                    <div class="col-lg-12 fade-in">
                        <div class="content-card card hover-lift">
                            <div class="row align-items-center">
                                <div class="col-md-4 text-center mb-3 mb-md-0">
                                    <div class="mb-3">
                                        <span class="badge bg-gradient-primary text-white mb-2 px-3 py-2">{{ speaker.day }}</span>
                                        <h4 class="text-primary-blue font-primary">{{ speaker.category }}</h4>
                                        <small class="text-medium">{{ speaker.date }}</small>
                                    </div>
                                    <img src="{% static speaker.image %}" 
                                         alt="{{ speaker.name }}" 
                                         class="people-avatar">
                                    <h5 class="text-primary-blue font-primary mt-3">{{ speaker.name }}</h5>
                                </div>
                                <div class="col-md-8">
                                    <div class="text-medium lh-lg justify">
                                        {{ speaker.description }}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    </div>

    <!-- Session Chairs -->
    <div class="content-section bg-light-gray">
        <div class="container">
            <div class="text-center mb-5">
                <h2 class="section-title fade-in">
                    <i class="fas fa-users me-3"></i>Session Chairs
                </h2>
            </div>
            
            {% for category, chairs in conference_data.session_chairs.items %}
                <div class="mb-5">
                    <h3 class="text-primary-blue font-primary mb-4 text-center">{{ category }}</h3>
                    <div class="row g-4">
                        {% for chair in chairs %}
                            <div class="col-lg-4 col-md-6 fade-in">
                                <div class="content-card card hover-lift h-100 text-center">
                                    <div class="mb-3">
                                        <span class="badge bg-gradient-secondary text-dark mb-3 px-3 py-2">{{ chair.role }}</span>
                                    </div>
                                    <img src="{% static chair.image %}" 
                                         alt="{{ chair.name }}" 
                                         class="people-avatar shadow-custom-small transition-normal">
                                    <h5 class="text-primary-blue font-primary">{{ chair.name }}</h5>
                                    <p class="text-medium mb-3">{{ chair.affiliation }}</p>
                                    <a href="mailto:{{ chair.email }}" 
                                       class="btn btn-outline-primary btn-sm">
                                        <i class="fas fa-envelope me-2"></i>Contact
                                    </a>
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>

    <!-- Host Universities -->
    <div class="content-section">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-10">
                    <div class="content-card text-center fade-in">
                        <h2 class="text-primary-blue font-primary mb-4">
                            <i class="fas fa-university me-3"></i>Host Universities
                        </h2>
                        <img src="{% static conference_data.host_universities.logos_image %}" 
                             class="img-fluid rounded-custom shadow-custom" 
                             alt="Host Universities Logos"
                             style="max-height: 200px;">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Gallery Section -->
    <!-- Gallery Section -->
<div class="content-section bg-light-gray">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="section-title fade-in">
                <i class="fas fa-images me-3"></i>Glimpses of Triennial Conference 2020
            </h2>
        </div>
        
        <div class="content-card fade-in">
            <!-- Main Video -->
            <div class="video-gallery-container">
                <div class="main-video-container mb-4">
                    <iframe id="mainVideoFrame"
                            src="{{ conference_data.gallery.main_iframe }}"
                            allowfullscreen 
                            frameborder="0" 
                            class="main-video-frame"></iframe>
                </div>

                <!-- Video Counter -->
                <div class="video-counter">
                    <span id="currentVideoNumber">1</span> / {{ conference_data.gallery.thumbnails|length }}
                </div>

                <!-- Video Thumbnails -->
                <div class="video-thumbnails">
                    <div class="thumbnail-grid">
                        {% for thumb in conference_data.gallery.thumbnails %}
                            <div class="video-thumbnail" 
                                 data-video-url="{{ thumb.video_url }}"
                                 data-video-number="{{ forloop.counter }}">
                                <img src="{{ thumb.thumbnail_url }}" 
                                     alt="Video Thumbnail {{ forloop.counter }}"/>
                            </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>



{% endblock %}

{% block extraScripts %}
<script>
// Enhanced scroll animations with intersection observer
document.addEventListener('DOMContentLoaded', function() {
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
    };

    const observer = new IntersectionObserver(function(entries) {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('visible');
                // Add stagger delay for multiple elements
                const index = Array.from(entry.target.parentNode.children).indexOf(entry.target);
                entry.target.style.transitionDelay = `${index * 0.1}s`;
            }
        });
    }, observerOptions);

    // Observe all fade-in elements
    document.querySelectorAll('.fade-in').forEach(el => {
        observer.observe(el);
    });

    // Smooth scrolling for anchor links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        });
    });

    // Video thumbnail click handler
    document.querySelectorAll('.video-thumbnail').forEach(thumb => {
        thumb.addEventListener('click', function(event) {
            event.preventDefault();
            const videoUrl = this.getAttribute('data-video-url');
            const videoNumber = this.getAttribute('data-video-number');
            loadVideo(videoUrl, videoNumber);
            
            // Update active thumbnail
            document.querySelectorAll('.video-thumbnail').forEach(t => t.classList.remove('active'));
            this.classList.add('active');
        });
    });

    // Set first thumbnail as active by default
    const firstThumbnail = document.querySelector('.video-thumbnail');
    if (firstThumbnail) {
        firstThumbnail.classList.add('active');
    }
});

// Function to load video in main container
function loadVideo(videoUrl, videoNumber) {
    const mainVideoFrame = document.getElementById('mainVideoFrame');
    const videoCounter = document.getElementById('currentVideoNumber');
    
    if (mainVideoFrame && videoCounter) {
        // Add loading animation
        mainVideoFrame.style.opacity = '0.5';
        
        // Update video source
        setTimeout(() => {
            mainVideoFrame.src = videoUrl;
            videoCounter.textContent = videoNumber;
            
            // Restore opacity after loading
            mainVideoFrame.onload = function() {
                mainVideoFrame.style.opacity = '1';
            };
            
            // Fallback to restore opacity
            setTimeout(() => {
                mainVideoFrame.style.opacity = '1';
            }, 1000);
        }, 200);
    }
}
</script>
{% endblock extraScripts %}
